# Migration `20200705112611-1st`

This migration has been generated by Sharif Jubayer Arefin at 7/5/2020, 11:26:12 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Post" (
"author_id" integer  NOT NULL ,"content" text  NOT NULL ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"id" SERIAL,"published" boolean  NOT NULL DEFAULT false,"title" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Profile" (
"bio" text  NOT NULL ,"id" SERIAL,"user_id" integer  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."User" (
"email" text  NOT NULL ,"id" SERIAL,"name" text  NOT NULL ,
    PRIMARY KEY ("id"))

ALTER TABLE "public"."post" DROP CONSTRAINT IF EXiSTS "post_user_id_fk";

ALTER TABLE "public"."profile" DROP CONSTRAINT IF EXiSTS "profile_user_id_fk";

CREATE UNIQUE INDEX "Profile.user_id" ON "public"."Profile"("user_id")

ALTER TABLE "public"."Post" ADD FOREIGN KEY ("author_id")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Profile" ADD FOREIGN KEY ("user_id")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

DROP TABLE "public"."post";

DROP TABLE "public"."profile";

DROP TABLE "public"."user";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200705112611-1st
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,33 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+model Post {
+  id        Int       @default(autoincrement()) @id
+  content   String
+  createdAt DateTime @default(now())
+  published Boolean  @default(false)
+  title     String
+  user      User     @relation(fields: [author_id], references: [id])
+  author_id Int
+}
+
+model Profile {
+  id      Int     @default(autoincrement()) @id
+  bio     String
+  user    User   @relation(fields: [user_id], references: [id])
+  user_id Int    @unique
+}
+
+model User {
+  id      Int      @default(autoincrement()) @id
+  email   String
+  name    String
+  posts    Post[]
+  profile Profile
+}
```


